<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Saskatchewan Paramedic Protocols</title>
    
    <!-- PWA Manifest and Themeing -->
    <meta name="theme-color" content="#343a40">
    <link rel="apple-touch-icon" href="https://placehold.co/192x192/007bff/ffffff?text=SPP">
    <link rel="manifest" href="data:application/manifest+json;base64,ewogICJuYW1lIjogIlNhc2thdGNoZXdhbiBQYXJhbWVkaWMgUHJvdG9jb2xzIiwKICAic2hvcnRfbmFtZSI6ICJTYXNrIFByb3RvY29scyIsCiAgInN0YXJ0X3VybCI6ICIuIiwKICAiZGlzcGxheSI6ICJzdGFuZGFsb25lIiwKICAiYmFja2dyb3VuZF9jb2xvciI6ICIjMjEyNTI5IiwKICAidGhlbWVfY29vb3IiOiAiIzM0M2E0MCIsCiAgImRlc2NyaXB0aW9uIjogIkEgcXVpY2sgcmVmZXJlbmNlIGFwcCBmb3IgU2Fza2F0Y2hld2FuIFBhcmFtZWRpYyBQcm90b2NvbHMuIiwKICAiaWNvbnMiOiBbCiAgICB7CiAgICAgICJzcmMiOiAiaHR0cHM6Ly9wbGFjZWhvbGQuY28vMTkyeDE5Mi8wMDdiZmYvZmZmZmZmP3RleHQ9U1BQIiwKICAgICAgInNpemVzIjogIjE5MngxOTIiLAogICAgICAidHlwZSI6ICJpbWFnZS9wbmciCiAgICB9LAogICAgewogICAgICAic3JjIjogImh0dHBzOi8vcGxhY2Vob2xkLmNvLzUxMng1MTIvMDA3YmZmL2ZmZmZmZj90ZXh0PVNQUCIsCiAgICAgICJzaXplcyI6ICI1MTJ4NTEyIiwKICAgICAgInR5cGUiOiAiaW1hZ2UvcG5nIgogICAgfQogIF0KfQo=">

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Google Fonts: Inter -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800&display=swap" rel="stylesheet">

    <!-- Custom Tailwind Configuration -->
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'emr-level': '#16a34a',
                        'pcp-level': '#f59e0b',
                        'icp-level': '#ea580c',
                        'acp-level': '#dc2626',
                        'theme-header': '#343a40',
                        'theme-sidebar': '#343a40',
                        'theme-bg': '#212529',
                        'theme-content': '#343a40',
                        'theme-blue': '#007bff',
                        'theme-blue-darker': '#0056b3',
                        'theme-text': '#dee2e6',
                        'theme-heading': '#f8f9fa',
                        'theme-warning': '#ffc107',
                        'theme-danger': '#dc3545',
                    },
                    fontFamily: {
                        sans: ['Inter', 'sans-serif'],
                    },
                }
            }
        }
    </script>

    <style>
        .sidebar-link.active { background-color: #007bff; color: #ffffff; font-weight: 600; }
        .sidebar-link.active:hover { background-color: #0056b3; }
        .no-scrollbar::-webkit-scrollbar { display: none; }
        .no-scrollbar { -ms-overflow-style: none; scrollbar-width: none; }
        .accordion-content ul { list-style-type: none; padding-left: 0; }
        .accordion-content h4 { color: #f8f9fa; font-weight: 600; margin-top: 1rem; margin-bottom: 0.75rem; }
        .accordion-content li { display: flex; align-items: flex-start; margin-bottom: 0.75rem; }
        .accordion-content li svg { flex-shrink: 0; width: 1.25rem; height: 1.25rem; margin-right: 0.75rem; margin-top: 0.125rem; }
        .accordion-toggle svg.indicator { transition: transform 0.3s; }
        .accordion-toggle[aria-expanded="true"] svg.indicator { transform: rotate(180deg); }
    </style>
</head>
<body class="bg-slate-900 text-slate-300 font-sans antialiased">
    <div id="app" class="min-h-screen flex flex-col">
        <!-- Header -->
        <header class="bg-slate-800/70 text-white p-3 shadow-md grid grid-cols-3 items-center sticky top-0 z-50 backdrop-blur-lg">
            <div class="flex items-center">
                <a href="#home" class="flex items-center truncate">
                    <svg class="h-10 w-10 text-cyan-400 flex-shrink-0" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
                        <path stroke-linecap="round" stroke-linejoin="round" d="M3.75 3v18M9.75 3v18M15.75 3v18M21.75 3v18M3.75 9h18M3.75 15h18" />
                    </svg>
                    <h1 class="text-lg md:text-xl font-bold text-slate-200 hidden sm:block truncate ml-3">Saskatchewan Paramedic Protocols</h1>
                </a>
            </div>
            <div class="hidden md:flex justify-center">
                <div class="relative w-full max-w-lg">
                    <input type="text" id="search-input-desktop" placeholder="Search Protocols..." class="block w-full rounded-lg border-0 bg-slate-800 py-2.5 pl-11 pr-4 text-slate-200 ring-1 ring-inset ring-slate-700 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-cyan-500 sm:text-sm sm:leading-6 focus:outline-none">
                     <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4">
                        <svg class="h-5 w-5 text-slate-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true">
                            <path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" />
                        </svg>
                    </div>
                </div>
            </div>
            <div class="flex justify-end">
                <button id="mobile-menu-button" class="md:hidden p-2 rounded-md hover:bg-slate-700 focus:outline-none">
                    <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M4 6h16M4 12h16M4 18h16"></path></svg>
                </button>
            </div>
        </header>

        <!-- Main Content -->
        <div class="flex flex-1">
            <!-- Sidebar -->
            <nav id="sidebar" class="w-64 bg-slate-900 p-4 shadow-lg fixed md:relative inset-y-0 left-0 transform -translate-x-full md:translate-x-0 transition-transform duration-300 ease-in-out z-40 overflow-y-auto no-scrollbar border-r border-slate-800">
                <div class="pt-16 md:pt-4">
                    <div class="md:hidden mb-4">
                         <div class="relative">
                            <input type="text" id="search-input-mobile" placeholder="Search Protocols..." class="block w-full rounded-lg border-0 bg-slate-800 py-2.5 pl-11 pr-4 text-slate-200 ring-1 ring-inset ring-slate-700 placeholder:text-slate-500 focus:ring-2 focus:ring-inset focus:ring-cyan-500 sm:text-sm sm:leading-6 focus:outline-none">
                            <div class="pointer-events-none absolute inset-y-0 left-0 flex items-center pl-4">
                                <svg class="h-5 w-5 text-slate-500" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" aria-hidden="true"><path fill-rule="evenodd" d="M9 3.5a5.5 5.5 0 100 11 5.5 5.5 0 000-11zM2 9a7 7 0 1112.452 4.391l3.328 3.329a.75.75 0 11-1.06 1.06l-3.329-3.328A7 7 0 012 9z" clip-rule="evenodd" /></svg>
                            </div>
                        </div>
                    </div>
                    <ul class="space-y-1">
                        <li><a href="#home" class="sidebar-link block p-2 rounded-md text-slate-300 hover:bg-slate-700 hover:text-white font-semibold">Home</a></li>
                        <li class="pt-4"><h3 class="px-2 text-xs font-bold text-slate-500 uppercase tracking-wider">Protocols</h3></li>
                        <li><a href="#procedures" class="sidebar-link block p-2 rounded-md text-slate-300 hover:bg-slate-700 hover:text-white">Procedures</a></li>
                        <li><a href="#patient-care-plans" class="sidebar-link block p-2 rounded-md text-slate-300 hover:bg-slate-700 hover:text-white">Patient Care Plans</a></li>
                        <li><a href="#medications" class="sidebar-link block p-2 rounded-md text-slate-300 hover:bg-slate-700 hover:text-white">Medications</a></li>
                        <li class="pt-4"><h3 class="px-2 text-xs font-bold text-slate-500 uppercase tracking-wider">Reference</h3></li>
                        <li><a href="#policies" class="sidebar-link block p-2 rounded-md text-slate-300 hover:bg-slate-700 hover:text-white">Policies</a></li>
                        <li><a href="#version-controls" class="sidebar-link block p-2 rounded-md text-slate-300 hover:bg-slate-700 hover:text-white">Version Controls</a></li>
                        <li><a href="#licence-levels" class="sidebar-link block p-2 rounded-md text-slate-300 hover:bg-slate-700 hover:text-white">Licence Levels</a></li>
                    </ul>
                </div>
            </nav>

            <!-- Content Area -->
            <main id="main-content" class="flex-1 p-4 sm:p-6 md:p-8 overflow-y-auto">
                <section id="home" class="protocol-section bg-slate-800 p-6 rounded-lg shadow-md mb-8">
                    <h2 class="text-3xl font-bold mb-4 text-slate-200">Welcome to the Digital Protocol Manual</h2>
                    <p class="mb-4">This tool provides rapid access to the Saskatchewan Paramedic Clinical Practice Protocols. Use the navigation sidebar to browse categories or the search bar to find a specific protocol.</p>
                    <p class="text-slate-400">All content is intended for reference by qualified medical professionals. Always adhere to the latest official version and exercise clinical judgment.</p>
                </section>

                <div id="content-display">
                    <section id="procedures" class="protocol-section mb-8">
                        <h2 class="text-2xl font-bold mb-4 text-cyan-400 border-b-2 border-slate-700 pb-2 sticky top-[68px] bg-slate-900 py-2 z-10">Procedures</h2>
                        <div id="procedures-content-wrapper" class="space-y-4"></div>
                    </section>
                    <section id="patient-care-plans" class="protocol-section mb-8">
                        <h2 class="text-2xl font-bold mb-4 text-cyan-400 border-b-2 border-slate-700 pb-2 sticky top-[68px] bg-slate-900 py-2 z-10">Patient Care Plans</h2>
                        <div id="patient-care-plans-content-wrapper" class="space-y-4"></div>
                    </section>
                    <section id="policies" class="protocol-section mb-8">
                        <h2 class="text-2xl font-bold mb-4 text-cyan-400 border-b-2 border-slate-700 pb-2 sticky top-[68px] bg-slate-900 py-2 z-10">Policies</h2>
                        <div id="policies-content-wrapper" class="space-y-4"></div>
                    </section>
                    <div id="no-results" class="hidden text-center py-10">
                        <h3 class="text-xl font-semibold text-slate-200">No Protocols Found</h3>
                        <p class="text-slate-400 mt-2">Your search did not match any protocols. Please try different keywords.</p>
                    </div>
                </div>
            </main>
        </div>

        <button id="back-to-top" class="hidden fixed bottom-5 right-5 bg-cyan-500 text-white p-3 rounded-full shadow-lg hover:bg-cyan-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-cyan-500">
            <svg class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M5 15l7-7 7 7" /></svg>
        </button>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', function () {
            // --- Icon Definitions ---
            const icons = {
                alert: `<svg class="text-theme-danger" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.21 3.03-1.742 3.03H4.42c-1.532 0-2.492-1.696-1.742-3.03l5.58-9.92zM10 13a1 1 0 110-2 1 1 0 010 2zm-1-8a1 1 0 011-1h.01a1 1 0 110 2H10a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>`,
                check: `<svg class="text-theme-blue" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z" clip-rule="evenodd"></path></svg>`,
                clipboard: `<svg class="text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path d="M8 3a1 1 0 011-1h2a1 1 0 110 2H9a1 1 0 01-1-1z"></path><path d="M6 3a2 2 0 00-2 2v11a2 2 0 002 2h8a2 2 0 002-2V5a2 2 0 00-2-2 3 3 0 01-3 3H9a3 3 0 01-3-3z"></path></svg>`,
                clock: `<svg class="text-theme-warning" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"></path></svg>`,
                users: `<svg class="text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015.5-4.93a6.97 6.97 0 00-1.5 4.33A6.97 6.97 0 006 16v1H1a5 5 0 015-5z"></path></svg>`,
                list: `<svg class="text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M3 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm0 4a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"></path></svg>`,
                target: `<svg class="text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zM7 9H5v2h2V9zm8 0h-2v2h2V9zM9 9h2v2H9V9z" clip-rule="evenodd"></path></svg>`,
                tools: `<svg class="text-gray-400" fill="currentColor" viewBox="0 0 20 20"><path fill-rule="evenodd" d="M11.49 3.17c-.38-1.56-2.6-1.56-2.98 0a1.532 1.532 0 01-2.286.948c-1.372-.836-2.942.734-2.106 2.106.54.886.061 2.042-.947 2.287-1.561.379-1.561 2.6 0 2.978a1.532 1.532 0 01.947 2.287c-.836 1.372.734 2.942 2.106 2.106a1.532 1.532 0 012.287.947c.379 1.561 2.6 1.561 2.978 0a1.533 1.533 0 012.287-.947c1.372.836 2.942-.734 2.106-2.106a1.533 1.533 0 01-.947-2.287c1.561-.379 1.561-2.6 0-2.978a1.532 1.532 0 01-.947-2.287c.836-1.372-.734-2.942-2.106-2.106a1.532 1.532 0 01-2.287-.947zM10 13a3 3 0 100-6 3 3 0 000 6z" clip-rule="evenodd"></path></svg>`,
            };

            // --- Dynamic Content Data ---
            const contentData = {
                procedures: [
                    { title: 'Airway Management (Bag Valve Mask)', keywords: 'bvm ventilation apneic', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Allows positive airway pressure to be applied to any patient not ventilating properly.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>EMR, PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Choose appropriately sized mask ensuring a tight seal.</span></li><li>${icons.tools}<span>Observe for mist on the mask and expansion of the chest wall.</span></li><li>${icons.tools}<span>If available, consider using SpO2 and EtCO2 to determine effectiveness.</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Apneic patients.</span></li><li>${icons.check}<span>Patients with respiratory rates too slow or too fast to provide adequate tidal volume.</span></li></ul>` },
                    { title: 'Airway Management (Endotracheal Intubation)', keywords: 'ett intubation', html: `<h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>Advanced Care Paramedic</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Open airway and pre-oxygenate patient while maintaining BURP.</span></li><li>${icons.tools}<span>Verify placement of ETT using the 5-point check and EtCO2 monitor.</span></li><li>${icons.tools}<span>Always recheck and document ETT placement after every major movement.</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Respiratory insufficiency.</span></li><li>${icons.check}<span>Altered mental status with airway compromise.</span></li><li>${icons.check}<span>Situation requiring positive pressure ventilation.</span></li></ul>` },
                    { title: 'Airway Management (Magill Forceps)', keywords: 'magill forceps obstruction', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Removal of airway obstructions unrelieved by abdominal or chest thrust.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>Advanced Care Paramedic</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Visualize the obstruction using a laryngoscope.</span></li><li>${icons.tools}<span>Holding the Magill forceps in the right hand, remove the obstruction.</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Complete airway obstruction.</span></li></ul>` },
                    { title: 'Airway Management (Medicated Facilitated Intubation)', keywords: 'mfi rsi sedation', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Difficult intubations.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>Advanced Care Paramedic</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Immediate need to correct a severely compromised airway or when respiratory arrest is imminent.</span></li></ul><h4>Precautions</h4><ul><li>${icons.alert}<span>A common mistake is not allowing adequate time for sedation to take effect.</span></li><li>${icons.clock}<span>The actual intubation should take no longer than 15-20 seconds to complete.</span></li><li>${icons.alert}<span>Following 3 unsuccessful intubation attempts, a rescue airway device should be considered.</span></li></ul><h4>Special Notes</h4><ul><li>${icons.clipboard}<span>All intubated patients must have tube placement confirmed and documented using clinical criteria and ETCO2 with waveform.</span></li><li>${icons.clipboard}<span>Pediatric intubation should be deferred whenever possible.</span></li></ul>` },
                    { title: 'Airway Management (Nasal Pharyngeal Airways)', keywords: 'npa nasopharyngeal', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Used as an alternative to an OPA. Provides a conduit for airflow between the nares and the pharynx.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Measure NPA from the nostril to the earlobe.</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Can be considered when patient with an intact gag reflex will not tolerate an OPA.</span></li></ul><h4>Contraindications</h4><ul><li>${icons.alert}<span>Head trauma may allow insertion of the NPA into the cranial cavity.</span></li></ul>` },
                    { title: 'Airway Management (Oral Pharyngeal Airways)', keywords: 'opa oropharyngeal', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Adjunct for basic airway management.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>EMR, PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Select appropriate size OPA, measuring from the corner of the mouth to the ear lobe.</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Patient is at risk of developing airway obstruction from the tongue.</span></li></ul><h4>Contraindications</h4><ul><li>${icons.alert}<span>Intact gag reflex.</span></li></ul>` },
                    { title: 'Airway Management (Supraglottic Airways)', keywords: 'supraglottic king lt lma', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Non-definitive management of the airway; alternatives to tracheal intubation or mask ventilation.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>EtCO2 is recommended for tube placement confirmation.</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>As an adjunctive in the difficult airway algorithm.</span></li></ul>` },
                    { title: 'Arterial Line Monitoring', keywords: 'art line blood pressure', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To obtain more accurate blood pressures and/or repeated blood gas samples.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>Advanced Care Paramedic</span></li></ul><h4>Precautions</h4><ul><li>${icons.alert}<span>Do not use the arterial line for administration of any fluids or medications.</span></li><li>${icons.alert}<span>Never turn off alarms.</span></li></ul>` },
                    { title: 'Blood and Blood Products Monitoring', keywords: 'transfusion packed cells plasma', html: `<h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP – monitor infusion</span></li></ul><h4>Precautions</h4><ul><li>${icons.alert}<span>Monitor for transfusion reaction (allergic reaction, fever, hemolytic reaction).</span></li><li>${icons.alert}<span>If patient exhibits any sign of possible transfusion reaction, discontinue infusion and seek medical control.</span></li></ul><h4>Special Notes</h4><ul><li>${icons.tools}<span>Blood/products must be administered via an IV pump and patient must be stable and afebrile for 30 mins prior to transport.</span></li><li>${icons.tools}<span>Only normal saline can be infused through the same IV site.</span></li></ul>` },
                    { title: 'Cardiac Monitoring (Continuous Monitoring)', keywords: 'ecg ekg rhythm dysrhythmia', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To monitor heart rhythms of patients who are at risk of developing cardiac dysrhythmia.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Place electrodes in the standard Lead II configuration.</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Patients at risk for dysrhythmia shall receive continuous ECG monitoring.</span></li></ul><h4>Special Notes</h4><ul><li>${icons.clipboard}<span>Limb lead ECG monitoring is for rhythm interpretation only. A 12-lead must be obtained to document diagnostic ECG changes.</span></li></ul>`},
                    { title: 'Cardiac Monitoring (12-Lead Acquisition/Interpretation)', keywords: 'ecg ekg heart attack', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>A diagnostic test to display different views of the heart’s electrical activity.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP/ICP (Acquisition Only), ACP (Acquisition and Interpretation)</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Known or suspected cardiac patients, suspected overdose, electrical injuries, syncope.</span></li></ul>` },
                    { title: 'Cardiopulmonary Resuscitation', keywords: 'cpr cardiac arrest', html: `<h4>Recommendations</h4><ul><li>${icons.check}<span>Compression rate: At least 100/min.</span></li><li>${icons.check}<span>Compression depth (Adults): At least 2 inches (5cm).</span></li><li>${icons.check}<span>Allow complete chest wall recoil. Minimize pauses to < 10 seconds.</span></li><li>${icons.check}<span>Compression to ventilation ratio (until advanced airway): 30:2 (Adults), 15:2 (Children/Infants with 2 HCP rescuers).</span></li></ul>` },
                    { title: 'Chest Decompression', keywords: 'needle thoracostomy tension pneumothorax', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>The emergency decompression of a tension pneumothorax.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>Advanced Care Paramedic</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Insert a large gauge catheter along the superior margin of the third rib at the mid-clavicular line.</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>High clinical suspicion of tension pneumothorax with progressive respiratory distress and shock symptoms.</span></li></ul><h4>Precautions</h4><ul><li>${icons.alert}<span>Simple or non-tension pneumothorax is not life threatening and should not be decompressed in the field.</span></li></ul>` },
                    { title: 'Chest Tube Monitoring', keywords: 'chest tube hemothorax pneumothorax', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Facilitate the removal of fluid and/or air from the pleural space.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Chest drainage apparatus should be at least one foot below the level of the insertion site.</span></li><li>${icons.tools}<span>Monitor underwater seal for occasional bubbling (normal in pneumothorax).</span></li></ul>` },
                    { title: 'Continuous Positive Airway Pressure (CPAP)', keywords: 'cpap pulmonary edema chf copd', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To decrease the work of breathing and the need for intubation in patients with shortness of breath secondary to CHF/pulmonary edema or COPD.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Respiratory distress (RR >25, SpO2 <92%, accessory muscle use).</span></li></ul><h4>Contraindications</h4><ul><li>${icons.alert}<span>Pneumothorax, chest trauma, hemodynamically unstable, altered mental state, active vomiting, upper GI bleed.</span></li></ul>` },
                    { title: 'Deep Tracheal Suctioning', keywords: 'suction tracheal tube secretions', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To maintain airway patency of patients with tracheal tubes.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Ensure patient has been properly pre-oxygenated.</span></li><li>${icons.tools}<span>Using your dominant hand insert catheter into the tracheal tube until resistance is felt. Withdraw catheter approximately one inch and apply suction intermittently.</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Patients who require tracheal tube suctioning.</span></li></ul>`},
                    { title: 'Drug Administration (Buccal)', keywords: 'buccal oral cheek gums glucose', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To administer medications via the buccal route.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>EMR, PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Confirm the 5 rights of medication administration.</span></li><li>${icons.tools}<span>Place medication between the patient’s gum and cheek near the molar teeth.</span></li></ul><h4>Contraindications</h4><ul><li>${icons.alert}<span>Unconscious patients or those without an intact gag reflex.</span></li></ul>`},
                    { title: 'Drug Administration (Intramuscular)', keywords: 'im injection', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>A method of administering a drug into a muscle.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>EMR (auto-injector), PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Insert the needle at a 90° angle, using a quick, dart-like technique.</span></li><li>${icons.tools}<span>Aspirate by pulling back on the plunger. If blood appears, withdraw slightly and re-aspirate.</span></li></ul><h4>Special Notes</h4><ul><li>${icons.clipboard}<span>EMRs can only administer epinephrine and naloxone by IM auto-injector.</span></li></ul>`},
                    { title: 'Drug Administration (Intranasal)', keywords: 'intranasal naloxone narcan', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>A method of administering a drug into a nasal cavity for rapid absorption.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>EMR (pre-filled syringe), PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>For volumes > 0.5 mL, deliver half the dose into each nostril.</span></li></ul><h4>Contraindications</h4><ul><li>${icons.alert}<span>Suspected nasal fracture, blood or mucus obstructing the passage.</span></li></ul>` },
                    { title: 'Drug Administration (Intraosseous)', keywords: 'io drug administration', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To initiate a rapid systemic response to medication via an established IO line.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Check patency of IO by aspirating blood or by monitoring flow with no signs of infiltration.</span></li><li>${icons.tools}<span>Flush IO line after administration.</span></li></ul>`},
                    { title: 'Drug Administration (Intravenous)', keywords: 'iv drug administration', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To initiate a rapid systemic response to medication via an established IV line.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Check patency of IV by aspirating blood or by monitoring flow with no signs of infiltration.</span></li><li>${icons.tools}<span>Flush IV line after administration.</span></li></ul><h4>Special Notes</h4><ul><li>${icons.clipboard}<span>PCPs are only authorized to administer dextrose, naloxone, ketorolac, and anti-emetics via IV.</span></li></ul>`},
                    { title: 'Drug Administration (Nebulized)', keywords: 'nebulizer ventolin salbutamol', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Converts a drug in solution into an aerosol mist for inhalation.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Place nebulizer face mask onto the patient and set the oxygen flow rate at 6–8 L/min (6 L/min for COPD).</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Bronchospasm (asthma, COPD, allergy), laryngeal edema, croup, hyperkalemia.</span></li></ul>`},
                    { title: 'Drug Administration (Oral)', keywords: 'po by mouth tablet', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Administration of oral medications.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>EMR, PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Place patient in sitting position.</span></li><li>${icons.tools}<span>Provide an adequate volume of water with tablets.</span></li></ul><h4>Contraindications</h4><ul><li>${icons.alert}<span>Impaired conscious state, or swallowing ability.</span></li></ul>`},
                    { title: 'Drug Administration (Rectal)', keywords: 'pr rectal diazepam', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Administration of medications rectally.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Insert catheter into the rectum and inject medication.</span></li><li>${icons.tools}<span>Withdraw catheter and hold the patient’s buttocks together to permit retention.</span></li></ul>`},
                    { title: 'Drug Administration (Subcutaneous)', keywords: 'sub-q sc injection', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Administration of medication subcutaneously.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Pinch a 5 cm fold of skin.</span></li><li>${icons.tools}<span>Insert the needle quickly at a 45° angle.</span></li></ul><h4>Contraindications</h4><ul><li>${icons.alert}<span>Injection into scar tissue, bruises, infection, or broken skin.</span></li></ul>`},
                    { title: 'Drug Administration (Sublingual)', keywords: 'sl nitroglycerin', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To administer medications sublingually.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>EMR, PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Direct the spray under the patient’s tongue.</span></li></ul>`},
                    { title: 'Emergency Tracheostomy Tube Replacements', keywords: 'trach tube dislodged', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To provide care when a tracheotomy tube has become obstructed or dislodged.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>A procedure will be developed by each Regional Medical Advisor which reflects the local standard of care.</span></li></ul>`},
                    { title: 'End Tidal CO2 Monitoring', keywords: 'etco2 capnography ventilation', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To measure the effectiveness of ventilation by measuring the amount of carbon dioxide in exhaled air.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Apply ETCO2 monitor. Maintain ETCO2 output between 35-40 mmHg.</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Any patient who is intubated with an advanced airway.</span></li></ul><h4>Precautions</h4><ul><li>${icons.alert}<span>A sudden drop in CO2 output is indicative of tube displacement.</span></li></ul>`},
                    { title: 'Glucose Monitoring', keywords: 'bgl blood sugar glucometer', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>A quick and convenient way of obtaining an indication of a patient’s blood glucose level.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>EMR, PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Lance the side of the finger and obtain a hanging drop of blood.</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Seizure, sick pediatric patients, decreased LOC, syncope, abnormal behavior.</span></li></ul>`},
                    { title: 'Interfacility Transfer of Patients Receiving Medication', keywords: 'ift transfer medication', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To guide paramedics attending on inter-facility transfers of patients receiving oral or IV drip medications.</span></li></ul><h4>Approved IV Infusions (PCP)</h4><ul><li>${icons.list}<span>IV Anti-microbials, IV Blood, IV Blood Products, IV Heparin, IV Oxytocin, IV Potassium, N-Acetylcysteine (Mucomyst), Fibrinolytics (*Stroke Only), Tranexamic Acid (TXA), Total Parenteral Nutrition (TPN).</span></li></ul>`},
                    { title: 'Interfacility Transfer of Patients with Medical Devices in Place', keywords: 'ift transfer device', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To guide paramedics transporting patients with various medical devices in place.</span></li></ul><h4>Approved Devices (PCP/ICP/ACP)</h4><ul><li>${icons.list}<span>Naso/Orogastric Tubes (suction), Tracheostomy Tubes, Jackson Pratt Drains, Central Venous Catheters (for fluid), Peritoneal Dialysis Tubes, Heimlich Valves, Chest Tubes (with water seal), PEG Tubes.</span></li></ul>`},
                    { title: 'Manual Defibrillation', keywords: 'defib shock vfib vtach', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To treat cardiac arrest with ventricular fibrillation or pulseless ventricular tachycardia.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Confirm patient is in cardiac arrest and rhythm is shockable.</span></li><li>${icons.tools}<span>Charge the defibrillator without interrupting chest compressions.</span></li><li>${icons.tools}<span>Deliver shock and immediately resume chest compressions.</span></li></ul>`},
                    { title: 'Pulse Oximetry', keywords: 'spo2 oxygen saturation', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>A rapid non-invasive measurement of arterial O2 saturation to assist in the diagnosis of hypoxia.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>EMR, PCP, ICP, ACP</span></li></ul><h4>Interpretation</h4><ul><li>${icons.check}<span>A SpO2 > 91% usually indicates adequate oxygenation. Keep > 95% except in COPD.</span></li><li>${icons.alert}<span>SpO2 results are inaccurate in carbon monoxide patients. They must receive 100% O2.</span></li></ul>`},
                    { title: 'Standard Approach / Ongoing Assessment', keywords: 'primary secondary survey opqrst sample', html: `<h4>Primary Survey</h4><ul><li>${icons.list}<span>Scene Safety, Level of Consciousness (AVPU), Circulation, Airway, Breathing.</span></li></ul><h4>Secondary Survey</h4><ul><li>${icons.list}<span>History (OPQRST, SAMPLE), Vital Signs, Physical Exam (Head to Toe).</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>All patients are to be provided with a comprehensive clinical assessment irrespective of the reason for contact.</span></li></ul>`},
                    { title: 'Transcutaneous Pacing', keywords: 'tcp pacing bradycardia', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Electronic cardiac pacing accomplished by using skin electrodes to pass electrical impulses through the thorax.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>Advanced Care Paramedic</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Begin pacing at a rate of 80 bpm.</span></li><li>${icons.tools}<span>Increase current by increments of 20 mAs while observing for electrical capture, then confirm mechanical capture.</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Unstable patient with second degree Mobitz type 2 block or third degree AV block.</span></li><li>${icons.check}<span>Bradycardia (HR < 60) with evidence of inadequate perfusion.</span></li></ul>`},
                    { title: 'Urinary Catheterization', keywords: 'foley catheter urine', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>May be used temporarily after an operation or as a method to deal with bladder problems.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>EMR (Monitor), PCP, ICP, ACP</span></li></ul><h4>Technique</h4><ul><li>${icons.tools}<span>Identify the urinary meatus and gently insert until 1 to 2 inches beyond where the urine is noted.</span></li><li>${icons.tools}<span>Inflate balloon with correct amount of sterile liquid.</span></li></ul>`},
                    { title: 'Vascular Access (Central Venous Line)', keywords: 'cvc picc port-a-cath', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To provide rapid and accurate access to the central venous system.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP/ICP (Monitor), ACP (Monitor/Access)</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Emergency situations for rapid access, long-term antibiotic therapy, TPN, chemotherapy, blood sampling, dialysis.</span></li></ul>`},
                    { title: 'Vascular Access (External Jugular Vein)', keywords: 'ej iv access', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>To gain emergent IV access when peripheral access is anticipated to be unobtainable.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>ACP (PCP/ICP Monitor Only)</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>For administration of drugs or volume replacement in patients with hypovolemic shock where peripheral cannulization is not possible.</span></li></ul><h4>Contraindications</h4><ul><li>${icons.alert}<span>Not to be used for insertion of a Central Venous Pressure (CVP) line.</span></li></ul>`},
                    { title: 'Vascular Access (Intraosseous)', keywords: 'io ez-io', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>An alternative technique for establishing vascular access in critical patients when peripheral IV access is difficult or time sensitive.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>ACP (ICP/PCP Monitor Only)</span></li></ul><h4>Indications</h4><ul><li>${icons.check}<span>Children < 6 in cardiac arrest/hypotension where IV access fails after 2 attempts or 90 seconds.</span></li><li>${icons.check}<span>Adults where peripheral IV access fails after 2 attempts or 90 seconds.</span></li></ul><h4>Pain Management</h4><ul><li>${icons.tools}<span>For conscious patients, administer 0.5 mg/kg 2% lidocaine slowly through the IO site before flushing.</span></li></ul>` },
                    { title: 'Vascular Access (Peripheral Intravenous)', keywords: 'iv saline lock', html: `<h4>Purpose</h4><ul><li>${icons.target}<span>Provides access to the circulation to administer drug therapy or fluids.</span></li></ul><h4>Registration Levels Authorized</h4><ul><li>${icons.users}<span>PCP, ICP, ACP</span></li></ul><h4>Special Notes</h4><ul><li>${icons.alert}<span>IVs should be established enroute unless specific exceptions are met (e.g., extrication delay, cardiac arrest).</span></li><li>${icons.tools}<span>Each dose of IV medication during cardiac arrest is followed by a fluid bolus (Adult: 20mL).</span></li></ul>` },
                ],
                policies: [
                    { title: 'Intercepts', keywords: 'intercepts transfer unstable cpr respiratory distress', html: `<h4>Key Principles</h4><ul><li>${icons.users}<span>Ensure the <strong class="text-theme-warning">most appropriately trained staff</strong> accompany patients during inter-facility transfers.</span></li><li>${icons.alert}<span>An intercept may be necessary if a patient <strong class="text-theme-warning">unexpectedly becomes unstable</strong>.</span></li></ul><h4>Indications for Intercept</h4><ul><li>${icons.list}<span>CPR in progress, Respiratory distress, Hypotension, Uncontrolled chest pain (suspected cardiac), Prolonged grand mal seizures, Decreased LOC, Arrhythmias (unless benign), Imminent childbirth.</span></li></ul><h4>Reporting</h4><ul><li>${icons.clipboard}<span>Failure to perform an indicated intercept <strong class="text-theme-warning">will be reviewed and forwarded to SCoP and the Ministry of Health.</strong></span></li></ul>` },
                    { title: 'Clinical Trials', keywords: 'clinical trials research ppc deviation', html: `<h4>PPC Notification</h4><ul><li>${icons.clipboard}<span>Paramedics participating in studies that impact or deviate from provincial protocols <strong class="text-theme-warning">must inform the PPC.</strong></span></li></ul><h4>Approval for Scope Deviation</h4><ul><li>${icons.check}<span>If a trial requires deviation from the current scope of practice, <strong class="text-theme-warning">approval from the College of Physicians and Surgeons is required.</strong></span></li></ul>` },
                    { title: 'Death in the Field', keywords: 'death in field coroner police dnr rigor mortis', html: `<h4>At the Scene</h4><ul><li>${icons.alert}<span>For patients pronounced dead, <strong class="text-theme-warning">do not disturb the scene</strong> and call local police.</span></li></ul><h4>Criteria for Pronouncement</h4><ul><li>${icons.check}<span>Injuries incompatible with life (e.g., decapitation, rigor mortis).</span></li><li>${icons.check}<span>Traumatic cardiopulmonary arrest with no vital signs, no pupillary reflexes, and asystole on EMS arrival.</span></li><li>${icons.clock}<span>Traumatic arrest with transport time <strong class="text-theme-warning">> 15 minutes.</strong></span></li><li>${icons.clock}<span>Cardiac arrest with no resuscitation for <strong class="text-theme-warning">> 15 minutes</strong> prior to arrival and in asystole.</span></li><li>${icons.clock}<span>Cardiac arrest failing to respond to resuscitation and now in asystole/PEA (<strong class="text-theme-warning">ACP: 20 mins, Basic: 30 mins</strong>).</span></li><li>${icons.clock}<span>Drowning with <strong class="text-theme-warning">> 60 minutes</strong> submerged.</span></li></ul><h4>Critical Considerations</h4><ul><li>${icons.alert}<span>If in doubt, <strong class="text-theme-warning">provide CPR until OLMC contact.</strong></span></li><li>${icons.alert}<span>In cases of suspected foul play, the <strong class="text-theme-warning">body and scene must not be disturbed</strong> until authorized.</span></li></ul>` },
                    { title: 'Health Care Directives', keywords: 'health care directives dnr proxy consent', html: `<h4>Core Principle</h4><ul><li>${icons.check}<span>Paramedics <strong class="text-theme-warning">must follow valid directives.</strong></span></li></ul><h4>Life-Threatening Situations</h4><ul><li>${icons.alert}<span><strong class="text-theme-warning">Do not delay treatment to locate a written directive.</strong></span></li></ul><h4>Uncertainty</h4><ul><li>${icons.alert}<span>If doubts about validity exist, <strong class="text-theme-warning">follow usual protocols</strong> and document reasons fully.</span></li><li>${icons.alert}<span>If unable to immediately locate a directive/proxy, <strong class="text-theme-warning">initiate treatment and contact a physician ASAP.</strong></span></li></ul>` },
                    { title: 'Protocol Deviation', keywords: 'protocol deviation clinical judgment reporting', html: `<h4>Guiding Principle</h4><ul><li>${icons.check}<span>Deviation is a <strong class="text-theme-warning">rare necessity,</strong> backed by <strong class="text-theme-warning">documented clinical reasoning and judgment.</strong></span></li></ul><h4>Action</h4><ul><li>${icons.users}<span>When considering deviation, a peer or expert medical team member should be consulted (if available).</span></li></ul><h4>Reporting</h4><ul><li>${icons.clipboard}<span>Any protocol deviations are <strong class="text-theme-warning">automatically reported to the Medical Advisor and SCoP within 30 days.</strong></span></li></ul>` },
                    { title: 'Refusal of Care', keywords: 'refusal of care consent capacity', html: `<h4>Patient Assessment</h4><ul><li>${icons.check}<span>Provider must ensure: the patient is <strong class="text-theme-warning">oriented,</strong> has no significant impairment, and <strong class="text-theme-warning">understands the risks of refusal.</strong></span></li></ul><h4>Mandatory Transport</h4><ul><li>${icons.alert}<span>Patients who are a <strong class="text-theme-warning">danger to themselves or others,</strong> or victims of child abuse, <strong class="text-theme-warning">must be transported.</strong></span></li></ul><h4>Guiding Principle</h4><ul><li>${icons.alert}<span>If any doubt exists, <strong class="text-theme-warning">err on the side of safety and transport.</strong></span></li></ul>` },
                ]
            };

            // --- Content Population Function ---
            function populateAccordion(wrapperId, data) {
                const wrapper = document.getElementById(wrapperId);
                if (!wrapper) return;
                data.forEach(item => {
                    const accordionItem = document.createElement('div');
                    accordionItem.className = 'accordion-item bg-theme-content rounded-lg shadow-md overflow-hidden';
                    accordionItem.dataset.keywords = item.keywords;

                    accordionItem.innerHTML = `
                        <button class="accordion-toggle flex justify-between items-center w-full p-6 text-left" aria-expanded="false">
                            <h3 class="text-xl font-bold text-theme-heading">${item.title}</h3>
                            <svg class="indicator w-6 h-6 transform text-gray-400" fill="none" viewBox="0 0 24 24" stroke="currentColor"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 9l-7 7-7-7"></path></svg>
                        </button>
                        <div class="accordion-content hidden px-6 pb-6 pt-4 border-t border-gray-700/50">
                            ${item.html}
                        </div>
                    `;
                    wrapper.appendChild(accordionItem);
                });
            }

            // --- Populate All Sections ---
            populateAccordion('procedures-content-wrapper', contentData.procedures);
            populateAccordion('policies-content-wrapper', contentData.policies);

            // --- UI Element Selectors ---
            const searchInputDesktop = document.getElementById('search-input-desktop');
            const searchInputMobile = document.getElementById('search-input-mobile');
            const noResultsMessage = document.getElementById('no-results');
            const backToTopButton = document.getElementById('back-to-top');
            const mobileMenuButton = document.getElementById('mobile-menu-button');
            const sidebar = document.getElementById('sidebar');
            const sidebarLinks = document.querySelectorAll('.sidebar-link');
            const allContentSections = document.querySelectorAll('.protocol-section');

            // --- Event Listeners ---
            function handleSearch(event) {
                const searchTerm = event.target.value.toLowerCase().trim();

                if (event.target.id === 'search-input-desktop') searchInputMobile.value = searchTerm;
                else searchInputDesktop.value = searchTerm;

                let resultsFound = false;

                document.querySelectorAll('.accordion-item').forEach(content => {
                    const text = content.textContent.toLowerCase();
                    const keywords = (content.dataset.keywords || '').toLowerCase();

                    if (text.includes(searchTerm) || keywords.includes(searchTerm)) {
                        content.style.display = 'block';
                        resultsFound = true;
                    } else {
                        content.style.display = 'none';
                    }
                });

                allContentSections.forEach(section => {
                    const visibleContent = section.querySelectorAll('.accordion-item[style*="display: block"]');
                    if (section.id === 'home' && searchTerm !== '') {
                        section.style.display = 'none';
                    } else if (section.id === 'home' && searchTerm === '') {
                        section.style.display = 'block';
                    } else {
                        section.style.display = (visibleContent.length > 0) ? 'block' : 'none';
                    }
                });

                noResultsMessage.style.display = (resultsFound || searchTerm === '') ? 'none' : 'block';
            }

            document.getElementById('content-display').addEventListener('click', function(event) {
                const toggle = event.target.closest('.accordion-toggle');
                if (toggle) {
                    const content = toggle.nextElementSibling;
                    const isExpanded = toggle.getAttribute('aria-expanded') === 'true';
                    toggle.setAttribute('aria-expanded', !isExpanded);
                    content.classList.toggle('hidden');
                }
            });

            searchInputDesktop.addEventListener('keyup', handleSearch);
            searchInputMobile.addEventListener('keyup', handleSearch);
            mobileMenuButton.addEventListener('click', e => { e.stopPropagation(); sidebar.classList.toggle('-translate-x-full'); });
            document.body.addEventListener('click', () => { if (window.innerWidth < 768 && !sidebar.classList.contains('-translate-x-full')) sidebar.classList.add('-translate-x-full'); });
            sidebar.addEventListener('click', e => e.stopPropagation());
            sidebarLinks.forEach(link => { link.addEventListener('click', () => { if (window.innerWidth < 768) sidebar.classList.add('-translate-x-full'); }); });
            window.addEventListener('scroll', () => { if (window.scrollY > 300) backToTopButton.classList.remove('hidden'); else backToTopButton.classList.add('hidden'); });
            backToTopButton.addEventListener('click', () => window.scrollTo({ top: 0, behavior: 'smooth' }));

            // --- Intersection Observer for Active Nav Link ---
            const observer = new IntersectionObserver(entries => {
                entries.forEach(entry => {
                    if (entry.isIntersecting) {
                        sidebarLinks.forEach(link => {
                            link.classList.remove('active');
                            if (link.getAttribute('href').substring(1) === entry.target.id) link.classList.add('active');
                        });
                    }
                });
            }, { rootMargin: "-40% 0px -60% 0px" });
            allContentSections.forEach(section => observer.observe(section));
        });
    </script>
</body>
</html>
